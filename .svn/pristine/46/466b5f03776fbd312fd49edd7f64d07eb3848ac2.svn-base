<?php

namespace app\admin\controller;

use common\libraries\Common;
use common\server\Game\ChangeCpUidServer;

class ChangeCpUid extends Oauth
{

    public $rs = ['code' => 1,'msg'=>'','data'=>[],'count'=>0];


//    public function index()
//    {
//
//        $data['page']       = $this->request->get('page/d',  1);
//        $data['limit']      = $this->request->get('limit/d', 20);
//
//        $list = ChangeCpUid::getList($data);
//        $total = ChangeCpUid::getCount(['status'=>1]);
//
//        $this->rs['code'] = 0;
//        $this->rs['msg'] = $list['msg'];
//        $this->rs['data'] = $list['data'];
//        $this->rs['count'] = $total;
//
//        return return_json($this->rs);
//    }


    public function getProduct()
    {
//        $res = Common::getProductList();
        $res = [
            0=>['code'=>'nbcq','name'=>'ç‰›é€¼ä¼ å¥‡']
        ];
        $this->rs['code'] = 0;
        $this->rs['data'] = $res;

        return return_json($this->rs);
    }

    public function change()
    {
        $data['type']       = $this->request->post('type/d',  1);
        $data['product']    = $this->request->post('product/s', '');
        $data['in_uid']     = $this->request->post('in_uid/s', '');

        $id = ChangeCpUidServer::change($data);

        $this->rs['code'] = 0;
        $this->rs['data'] = json_encode($id);
        return return_json($this->rs);


    }

}