<?php
/**
 * Created by PhpStorm.
 * User: crosstime
 * Date: 2018/8/14
 * Time: 下午5:31
 */
namespace common\sql_server;


use common\model\db_customer\RecallPlanLog;
use think\Db;


class RecallPlanLogSqlServer extends BaseSqlServer
{



    public static function insertInfo($data)
    {

        $time = time();
        $model = new RecallPlanLog();
        $is_exist = $model->where(['exec_date'=>date('Y-m-d'),'plan_id'=>$data['id']])->find();
        $is_exist = isset($is_exist) ? $is_exist->toArray() : [];
        if(empty($is_exist)){
            $res = $model->allowField($model->allow_field)->save($data);
        }else{
            $res = false;
        }

        return $res;
    }



    public static function getInfo($where)
    {
        $model = new RecallPlanLog();
        $res = $model->where($where)->select();

        $res = isset($res) ? $res->toArray() : [];
        return $res;
    }





}