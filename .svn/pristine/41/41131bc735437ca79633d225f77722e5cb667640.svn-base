<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>后台管理系统</title>
    <link rel="stylesheet" href="/assets/vendor/layui/css/layui.css"/>
    <link rel="stylesheet" href="/assets/model/common/css/style.css"/>
    <link rel="stylesheet" href="/assets/model/common/css/common.css"/>
    <!--[if lt IE 9]>
    <script src="/assets/model/common/js/html5shiv.min.js"></script>
    <script src="/assets/model/common/js/respond.min.js"></script>
    <![endif]-->
    <style>
        .layui-col-space15 {
            /* margin: -7.5px; */
            margin:-7.5px 0 !important;
        }
    </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<form class="layui-form" action="" style="padding: 20px;">

    <div class="layui-tab">

       <div class="layui-tab-content">

           <div class="layui-inline" style="margin-bottom: 6px;">
               <label class="layui-form-label">游戏: </label>
               <div class="layui-input-inline">
                   <select name="game"  lay-filter="game" id="game" lay-search="">
                       <option value="">选择或搜索</option>
                   </select>
               </div>
           </div>

           <div class="layui-form-item">
               <label class="layui-form-label">封禁时长</label>
               <div class="layui-input-inline">
                   <!--<input type="password" name="ban_time" placeholder="以分为单位，留空默认永久" class="layui-input">-->
                   <input type="text" name="ban_time" lay-verify="title" autocomplete="off" placeholder="以秒为单位，留空默认1年" class="layui-input">
               </div>
           </div>

           <div class="layui-tab-item layui-show">
               <label class="layui-form-label">用户</label>
               <div class="layui-input-inline">
                   <textarea placeholder="输入角色ID||区服ID，多个角色回车换行" name="account" rows="10" cols="50" ></textarea>
                   <div>例子：1637864899000885551||615</div>
               </div>




               <div class="layui-form-item">
                   <label class="layui-form-label">数据</label>
                   <div class="layui-input-block">
                       <input type="radio" name="type" value="1" title="批量封禁" checked="">
                       <input type="radio" name="type" value="2" title="批量解封">

                   </div>

               </div>
           </div>
       </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-input-block">
            <button type="submit" class="layui-btn" lay-submit="" lay-filter="submit_btn">立即提交</button>
        </div>
    </div>
</form>
<script type="text/javascript" src="/assets/vendor/layui/layui.js"></script>
<script>

    layui.config({
        version: true,
        base: '/assets/model/'
    }).extend({
        common: 'common/js/common',

    }).use(['table','laydate','jquery','common','form'], function(){
        var table   = layui.table,
            $   = layui.jquery,
            form   = layui.form,
            common   = layui.common,
            laydate = layui.laydate;


        common.req({
            url:'ajax/getGameProduct'
            ,success:function(json)
            {
                if(json.code == 0){

                    let html = '';
                    $.each(json.data,function(k,v){

                        html ='<option value="'+v.code+'">'+v.name+'</option>';
                        $('#game').append(html)
                    })

                    form.render('select');


                }else {
                    layer.msg(json.msg,{icon:2});
                }
            }
        })


        //监听提交
        form.on('submit(submit_btn)', function(data){
            common.req({
                url: "batch_block/batch_block",
                data: data.field,
                type: "post",
                dataType:"json",
                success:function(data){
                    if( data.code == 0 ){
                        parent.res_msg(data.msg);
                    }else{
                        layer.msg(data.msg,{icon:2});
                    }
                },
                error:function(data){
                    layer.alert('错误'+data.msg,{icon:2});
                }
            });
            return false;
        });

    });
</script>
</body>
</html>